{"componentChunkName":"component---src-templates-course-content-template-js","path":"/part-1/2-second-deploy","result":{"data":{"page":{"htmlAst":{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"exercise","properties":{"name":"whoami"},"children":[{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"# in kube\nmkdir whoami"}]}]}]}]},{"type":"element","tagName":"exercise","properties":{"name":"declarative namespace"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So far we have created the namespace without yaml."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"See what a namespace would look like as a yaml"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"kubectl create namespace __NAME__ --dry-run -o yaml"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"store the minimal version as "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"whoami/namespace.yml"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"apiVersion: v1\nkind: Namespace\nmetadata:\n  name: __NAME__"}]}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"kubectl apply -f whoami"}]}]}]}]},{"type":"element","tagName":"exercise","properties":{"name":"create deployment whoami"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Notice how we omit replicas - it will then use the default value."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We also set metadata.namespace."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"And apply the whole directory"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"whoami/deployment.yml"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: whoami\n  namespace: __NAME__\nspec:\n  selector:\n    matchLabels:\n      app: whoami\n  template:\n    metadata:\n      labels:\n        app: whoami\n    spec:\n      containers:\n        - name: whoami\n          image: jwilder/whoami"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Notice how we omit "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"replicas"}]},{"type":"text","value":" - it will then use the default value."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We also set "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"metadata.namespace"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"And apply the whole directory"}]}]},{"type":"element","tagName":"exercise","properties":{"name":"label selectors"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"What's this mess?"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"spec:\n  selector:\n    matchLabels:\n      app: whoami\n  template:\n    metadata:\n      labels:\n        app: whoami"}]}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"kubectl get pod -n __NAME__ -l app=whoami"}]}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"kubectl label pod -n __NAME__ PODNAME test=yes"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"and get pods where test=yes"}]}]},{"type":"element","tagName":"exercise","properties":{"name":"delete and apply again"},"children":[{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"kubectl delete ns __NAME__"}]}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"kubectl apply -f whoami"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Fails, why? What if you apply again?"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"How do we fix this?"}]}]},{"type":"element","tagName":"summary","properties":{},"children":[{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"kubectl apply -f dir"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"labels"}]},{"type":"text","value":"\n"}]}]}]},"html":"<div><exercise name='whoami'><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\"># in kube\nmkdir whoami</code></pre></div></exercise><exercise name='declarative namespace'><p>So far we have created the namespace without yaml.</p><p>See what a namespace would look like as a yaml</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">kubectl create namespace __NAME__ --dry-run -o yaml</code></pre></div><p>store the minimal version as <strong>whoami/namespace.yml</strong></p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">apiVersion: v1\nkind: Namespace\nmetadata:\n  name: __NAME__</code></pre></div><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">kubectl apply -f whoami</code></pre></div></exercise><exercise name='create deployment whoami'><p>Notice how we omit replicas - it will then use the default value.</p><p>We also set metadata.namespace.</p><p>And apply the whole directory</p><p><strong>whoami/deployment.yml</strong></p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: whoami\n  namespace: __NAME__\nspec:\n  selector:\n    matchLabels:\n      app: whoami\n  template:\n    metadata:\n      labels:\n        app: whoami\n    spec:\n      containers:\n        - name: whoami\n          image: jwilder/whoami</code></pre></div><p>Notice how we omit <code class=\"language-text\">replicas</code> - it will then use the default value.</p><p>We also set <code class=\"language-text\">metadata.namespace</code>.</p><p>And apply the whole directory</p></exercise><exercise name='label selectors'><p>What's this mess?</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">spec:\n  selector:\n    matchLabels:\n      app: whoami\n  template:\n    metadata:\n      labels:\n        app: whoami</code></pre></div><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">kubectl get pod -n __NAME__ -l app=whoami</code></pre></div><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">kubectl label pod -n __NAME__ PODNAME test=yes</code></pre></div><p>and get pods where test=yes</p></exercise><exercise name='delete and apply again'><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">kubectl delete ns __NAME__</code></pre></div><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">kubectl apply -f whoami</code></pre></div><p>Fails, why? What if you apply again?</p><p>How do we fix this?</p></exercise><summary><ul>\n<li>kubectl apply -f dir</li>\n<li>labels</li>\n</ul></summary></div>","frontmatter":{"path":"/part-1/2-second-deploy","title":"Second Deploy"},"fileAbsolutePath":"/Users/matti/dev/kubernetes-hy.github.io/data/part-1/2-second-deploy.md"},"allPages":{"edges":[{"node":{"id":"b1c47f2d-76e9-58d8-9a14-2b6132468171","frontmatter":{"path":"/frontmatter-guide","title":"Frontmatter-guide"}}},{"node":{"id":"12166a9a-6e11-5213-94d8-08c3f18bce09","frontmatter":{"path":"/sanasto","title":"Sanasto"}}},{"node":{"id":"24e8849f-09ad-5dc0-ada7-9ee5278ef27b","frontmatter":{"path":"/part-0","title":"Part 0"}}},{"node":{"id":"8467a6ee-a4e0-5f79-92f4-8876c9a97f5d","frontmatter":{"path":"/part-0/2-kubectl-config","title":"kubectl config"}}},{"node":{"id":"13dd60c3-9be6-5a4b-ae4f-116e6dcffdb1","frontmatter":{"path":"/part-0/3-kubectl-basics","title":"kubectl basics"}}},{"node":{"id":"0521f0d3-f635-5905-a983-8a5d07967c76","frontmatter":{"path":"/part-0/1-kubernetes","title":"Kubernetes"}}},{"node":{"id":"a263867b-5ee2-59a1-b9cc-3ffa8e0b8965","frontmatter":{"path":"/part-0/5-pod","title":"Pod"}}},{"node":{"id":"b329e1eb-4475-517c-aacc-00490d0d2839","frontmatter":{"path":"/part-1","title":"Part 1"}}},{"node":{"id":"f2603f2a-7d1c-577c-b6ef-cff715589ff2","frontmatter":{"path":"/part-1/1-first-deploy","title":"First Deploy"}}},{"node":{"id":"1cb09917-b0d2-558b-b2f2-86e195b30139","frontmatter":{"path":"/part-0/4-namespace","title":"Namespace"}}},{"node":{"id":"1b008c97-c439-59e0-aae1-3f90dbdd3f26","frontmatter":{"path":"/part-1/2-second-deploy","title":"Second Deploy"}}},{"node":{"id":"9d9ca5cf-d405-50f5-b561-f857d2a77c76","frontmatter":{"path":"/","title":"Homepage"}}}]}},"pageContext":{}},"staticQueryHashes":["3294351120","994120085"]}