{"componentChunkName":"component---src-templates-course-content-template-js","path":"/part-1/4-clusterip","result":{"data":{"page":{"htmlAst":{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Service of type ClusterIP"}]},{"type":"element","tagName":"exercise","properties":{"name":"service-cip"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"whoami/service-cip.yml"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"apiVersion: v1\nkind: Service\nmetadata:\n  name: whoami-cip\n  namespace: __NAME__\nspec:\n  selector:\n    app: whoami\n  ports:\n    - port: 80\n      targetPort: 8000"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"and apply"}]}]},{"type":"element","tagName":"exercise","properties":{"name":"debug container"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/matti/bause","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"https://github.com/matti/bause"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"kubectl run -n __NAME__ bause --image ghcr.io/matti/bause"}]}]}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"test "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"curl whoami-cip"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"check /etc/resolv.conf"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Scale whoami pods and check Endpoints"}]},{"type":"text","value":"\n"}]}]},{"type":"element","tagName":"h2","properties":{"id":"ingress","style":"position:relative;"},"children":[{"type":"text","value":"Ingress"},{"type":"element","tagName":"a","properties":{"href":"#ingress","ariaLabel":"ingress permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"exercise","properties":{"name":"create ingress"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"whoami/ingress-nginx.yml"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: whoami\n  namespace: __NAME__\nspec:\n  ingressClassName: nginx\n  rules:\n    - host: __NAME__.com\n      http:\n        paths:\n          - path: /\n            pathType: Prefix\n            backend:\n              service:\n                name: whoami-cip\n                port:\n                  number: 80"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"and apply."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In Lens check Network > Ingress"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Get the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ingress-nginx"}]},{"type":"text","value":" LoadBalancer from the Service of Namespace "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ingress-nginx-1"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"curl --header \"Host: __NAME__.com\" LB-NAME"}]}]}]}]},{"type":"element","tagName":"summary","properties":{},"children":[{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ClusterIP Service represents a label of pods"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"debug pod/container"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Ingress is managed gateway to cluster and saves money"}]},{"type":"text","value":"\n"}]}]}]},"html":"<div><p>Service of type ClusterIP</p><exercise name='service-cip'><p><strong>whoami/service-cip.yml</strong></p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">apiVersion: v1\nkind: Service\nmetadata:\n  name: whoami-cip\n  namespace: __NAME__\nspec:\n  selector:\n    app: whoami\n  ports:\n    - port: 80\n      targetPort: 8000</code></pre></div><p>and apply</p></exercise><exercise name='debug container'><p><a href=\"https://github.com/matti/bause\" target=\"_blank\" rel=\"noopener noreferrer\">https://github.com/matti/bause</a></p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">kubectl run -n __NAME__ bause --image ghcr.io/matti/bause</code></pre></div><ul>\n<li>test <code class=\"language-text\">curl whoami-cip</code></li>\n<li>check /etc/resolv.conf</li>\n<li>Scale whoami pods and check Endpoints</li>\n</ul></exercise><h2 id=\"ingress\" style=\"position:relative;\">Ingress<a href=\"#ingress\" aria-label=\"ingress permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2><exercise name='create ingress'><p><strong>whoami/ingress-nginx.yml</strong></p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: whoami\n  namespace: __NAME__\nspec:\n  ingressClassName: nginx\n  rules:\n    - host: __NAME__.com\n      http:\n        paths:\n          - path: /\n            pathType: Prefix\n            backend:\n              service:\n                name: whoami-cip\n                port:\n                  number: 80</code></pre></div><p>and apply.</p><p>In Lens check Network > Ingress</p><p>Get the <code class=\"language-text\">ingress-nginx</code> LoadBalancer from the Service of Namespace <code class=\"language-text\">ingress-nginx-1</code></p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">curl --header &quot;Host: __NAME__.com&quot; LB-NAME</code></pre></div></exercise><summary><ul>\n<li>ClusterIP Service represents a label of pods</li>\n<li>debug pod/container</li>\n<li>Ingress is managed gateway to cluster and saves money</li>\n</ul></summary></div>","frontmatter":{"path":"/part-1/4-clusterip","title":"ClusterIP"},"fileAbsolutePath":"/Users/matti/dev/kubernetes-hy.github.io/data/part-1/4-clusterip.md"},"allPages":{"edges":[{"node":{"id":"b1c47f2d-76e9-58d8-9a14-2b6132468171","frontmatter":{"path":"/frontmatter-guide","title":"Frontmatter-guide"}}},{"node":{"id":"12166a9a-6e11-5213-94d8-08c3f18bce09","frontmatter":{"path":"/sanasto","title":"Sanasto"}}},{"node":{"id":"24e8849f-09ad-5dc0-ada7-9ee5278ef27b","frontmatter":{"path":"/part-0","title":"Part 0"}}},{"node":{"id":"8467a6ee-a4e0-5f79-92f4-8876c9a97f5d","frontmatter":{"path":"/part-0/2-kubectl-config","title":"kubectl config"}}},{"node":{"id":"13dd60c3-9be6-5a4b-ae4f-116e6dcffdb1","frontmatter":{"path":"/part-0/3-kubectl-basics","title":"kubectl basics"}}},{"node":{"id":"0521f0d3-f635-5905-a983-8a5d07967c76","frontmatter":{"path":"/part-0/1-kubernetes","title":"Kubernetes"}}},{"node":{"id":"a263867b-5ee2-59a1-b9cc-3ffa8e0b8965","frontmatter":{"path":"/part-0/5-pod","title":"Pod"}}},{"node":{"id":"b329e1eb-4475-517c-aacc-00490d0d2839","frontmatter":{"path":"/part-1","title":"Part 1"}}},{"node":{"id":"f2603f2a-7d1c-577c-b6ef-cff715589ff2","frontmatter":{"path":"/part-1/1-first-deploy","title":"First Deploy"}}},{"node":{"id":"bd25e984-94a9-534b-8527-3869b6c77792","frontmatter":{"path":"/part-1/3-loadbalancer","title":"LoadBalancer"}}},{"node":{"id":"1cb09917-b0d2-558b-b2f2-86e195b30139","frontmatter":{"path":"/part-0/4-namespace","title":"Namespace"}}},{"node":{"id":"1b008c97-c439-59e0-aae1-3f90dbdd3f26","frontmatter":{"path":"/part-1/2-second-deploy","title":"Second Deploy"}}},{"node":{"id":"c641591d-97e5-5c9c-a217-783adff04421","frontmatter":{"path":"/part-1/4-clusterip","title":"ClusterIP"}}},{"node":{"id":"9d9ca5cf-d405-50f5-b561-f857d2a77c76","frontmatter":{"path":"/","title":"Homepage"}}}]}},"pageContext":{}},"staticQueryHashes":["3294351120","994120085"]}